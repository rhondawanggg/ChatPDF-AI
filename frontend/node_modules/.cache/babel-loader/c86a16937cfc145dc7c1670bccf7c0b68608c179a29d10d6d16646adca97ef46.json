{"ast":null,"code":"var _jsxFileName = \"/Users/wsx/Desktop/PDF Chat/frontend/src/components/ChatInterface.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport MessageBubble from \"./MessageBubble\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatInterface({\n  disabled,\n  chatHistory,\n  onSend,\n  loading\n}) {\n  _s();\n  const [input, setInput] = useState(\"\");\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [chatHistory, loading]);\n  const handleSend = () => {\n    if (!input.trim() || disabled || loading) return;\n    onSend(input.trim());\n    setInput(\"\");\n  };\n  const handleKeyDown = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-[420px]\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto px-2 pb-2 space-y-3\",\n      children: [chatHistory.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-400 text-center mt-16\",\n        children: \"\\u8BF7\\u4E0A\\u4F20 PDF \\u5E76\\u5F00\\u59CB\\u63D0\\u95EE\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 11\n      }, this), chatHistory.map((msg, idx) => /*#__PURE__*/_jsxDEV(MessageBubble, {\n        role: msg.role,\n        content: msg.content\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-start\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-2xl shadow animate-pulse\",\n          children: \"AI\\u601D\\u8003\\u4E2D\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-2 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"flex-1 resize-none rounded-xl border border-gray-200 shadow px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-300 bg-white min-h-[44px] max-h-32 transition-all\",\n        placeholder: disabled ? \"请先上传 PDF\" : \"请输入你的问题，回车发送…\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: handleKeyDown,\n        disabled: disabled || loading,\n        rows: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold px-6 py-2 rounded-xl shadow hover:from-blue-600 hover:to-purple-600 transition-all disabled:opacity-50\",\n        onClick: handleSend,\n        disabled: disabled || loading || !input.trim(),\n        children: \"\\u53D1\\u9001\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatInterface, \"AX2yuZd5BREnJU05+no28Fv8OOA=\");\n_c = ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useRef","useState","useEffect","MessageBubble","jsxDEV","_jsxDEV","ChatInterface","disabled","chatHistory","onSend","loading","_s","input","setInput","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","trim","handleKeyDown","e","key","shiftKey","preventDefault","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","idx","role","content","ref","placeholder","value","onChange","target","onKeyDown","rows","onClick","_c","$RefreshReg$"],"sources":["/Users/wsx/Desktop/PDF Chat/frontend/src/components/ChatInterface.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport MessageBubble from \"./MessageBubble\";\n\nexport default function ChatInterface({ disabled, chatHistory, onSend, loading }) {\n  const [input, setInput] = useState(\"\");\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [chatHistory, loading]);\n\n  const handleSend = () => {\n    if (!input.trim() || disabled || loading) return;\n    onSend(input.trim());\n    setInput(\"\");\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-[420px]\">\n      <div className=\"flex-1 overflow-y-auto px-2 pb-2 space-y-3\">\n        {chatHistory.length === 0 && (\n          <div className=\"text-gray-400 text-center mt-16\">请上传 PDF 并开始提问…</div>\n        )}\n        {chatHistory.map((msg, idx) => (\n          <MessageBubble key={idx} role={msg.role} content={msg.content} />\n        ))}\n        {loading && (\n          <div className=\"flex justify-start\">\n            <div className=\"bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-2xl shadow animate-pulse\">AI思考中…</div>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n      <div className=\"mt-2 flex items-center gap-2\">\n        <textarea\n          className=\"flex-1 resize-none rounded-xl border border-gray-200 shadow px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-300 bg-white min-h-[44px] max-h-32 transition-all\"\n          placeholder={disabled ? \"请先上传 PDF\" : \"请输入你的问题，回车发送…\"}\n          value={input}\n          onChange={e => setInput(e.target.value)}\n          onKeyDown={handleKeyDown}\n          disabled={disabled || loading}\n          rows={1}\n        />\n        <button\n          className=\"bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold px-6 py-2 rounded-xl shadow hover:from-blue-600 hover:to-purple-600 transition-all disabled:opacity-50\"\n          onClick={handleSend}\n          disabled={disabled || loading || !input.trim()}\n        >发送</button>\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}