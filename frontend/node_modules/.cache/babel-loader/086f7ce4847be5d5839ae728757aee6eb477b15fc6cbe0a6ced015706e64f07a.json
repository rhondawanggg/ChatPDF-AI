{"ast":null,"code":"var _jsxFileName = \"/Users/wsx/Desktop/PDF Chat/frontend/src/components/UploadBox.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UploadBox({\n  onSuccess\n}) {\n  _s();\n  const [dragActive, setDragActive] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const inputRef = useRef();\n  const handleDrop = async e => {\n    e.preventDefault();\n    setDragActive(false);\n    const file = e.dataTransfer.files[0];\n    if (!file || file.type !== \"application/pdf\") return;\n    await uploadFile(file);\n  };\n  const handleChange = async e => {\n    const file = e.target.files[0];\n    if (!file || file.type !== \"application/pdf\") return;\n    await uploadFile(file);\n  };\n  const uploadFile = async file => {\n    setUploading(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      // 实际项目应替换为真实后端接口\n      const res = await fetch(\"/upload_pdf/\", {\n        method: \"POST\",\n        body: formData\n      });\n      // 假设后端返回 { pdf_id: \"demo\" }\n      const data = await res.json();\n      onSuccess(data.pdf_id || \"demo\", file.name);\n    } catch (e) {\n      alert(\"上传失败，请重试\");\n    }\n    setUploading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `transition-all duration-300 border-2 ${dragActive ? \"border-blue-400 bg-blue-50\" : \"border-dashed border-gray-300 bg-gray-50\"} rounded-2xl flex flex-col items-center justify-center py-12 cursor-pointer shadow-inner relative`,\n    onDragOver: e => {\n      e.preventDefault();\n      setDragActive(true);\n    },\n    onDragLeave: e => {\n      e.preventDefault();\n      setDragActive(false);\n    },\n    onDrop: handleDrop,\n    onClick: () => inputRef.current.click(),\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ref: inputRef,\n      type: \"file\",\n      accept: \"application/pdf\",\n      className: \"hidden\",\n      onChange: handleChange,\n      disabled: uploading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-16 h-16 rounded-full flex items-center justify-center bg-gradient-to-tr from-blue-400 to-purple-400 animate-pulse ${uploading ? \"opacity-60\" : \"\"}`,\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-8 h-8 text-white\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M12 4v16m8-8H4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 117\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg font-medium text-gray-700\",\n        children: \"\\u62D6\\u62FD PDF \\u5230\\u6B64\\u5904\\uFF0C\\u6216\\u70B9\\u51FB\\u4E0A\\u4F20\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-400\",\n        children: \"\\u4EC5\\u652F\\u6301\\u5355\\u4E2A PDF \\u6587\\u4EF6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), uploading && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mt-2 text-blue-500 animate-pulse\",\n        children: \"\\u4E0A\\u4F20\\u4E2D\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(UploadBox, \"T/3vfA60j8IqZEaMAxoJOh7dm9U=\");\n_c = UploadBox;\nvar _c;\n$RefreshReg$(_c, \"UploadBox\");","map":{"version":3,"names":["React","useRef","useState","jsxDEV","_jsxDEV","UploadBox","onSuccess","_s","dragActive","setDragActive","uploading","setUploading","inputRef","handleDrop","e","preventDefault","file","dataTransfer","files","type","uploadFile","handleChange","target","formData","FormData","append","res","fetch","method","body","data","json","pdf_id","name","alert","className","onDragOver","onDragLeave","onDrop","onClick","current","click","children","ref","accept","onChange","disabled","fileName","_jsxFileName","lineNumber","columnNumber","fill","stroke","strokeWidth","viewBox","strokeLinecap","strokeLinejoin","d","_c","$RefreshReg$"],"sources":["/Users/wsx/Desktop/PDF Chat/frontend/src/components/UploadBox.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\n\nexport default function UploadBox({ onSuccess }) {\n  const [dragActive, setDragActive] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const inputRef = useRef();\n\n  const handleDrop = async (e) => {\n    e.preventDefault();\n    setDragActive(false);\n    const file = e.dataTransfer.files[0];\n    if (!file || file.type !== \"application/pdf\") return;\n    await uploadFile(file);\n  };\n\n  const handleChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file || file.type !== \"application/pdf\") return;\n    await uploadFile(file);\n  };\n\n  const uploadFile = async (file) => {\n    setUploading(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      // 实际项目应替换为真实后端接口\n      const res = await fetch(\"/upload_pdf/\", {\n        method: \"POST\",\n        body: formData,\n      });\n      // 假设后端返回 { pdf_id: \"demo\" }\n      const data = await res.json();\n      onSuccess(data.pdf_id || \"demo\", file.name);\n    } catch (e) {\n      alert(\"上传失败，请重试\");\n    }\n    setUploading(false);\n  };\n\n  return (\n    <div\n      className={`transition-all duration-300 border-2 ${dragActive ? \"border-blue-400 bg-blue-50\" : \"border-dashed border-gray-300 bg-gray-50\"} rounded-2xl flex flex-col items-center justify-center py-12 cursor-pointer shadow-inner relative`}\n      onDragOver={e => { e.preventDefault(); setDragActive(true); }}\n      onDragLeave={e => { e.preventDefault(); setDragActive(false); }}\n      onDrop={handleDrop}\n      onClick={() => inputRef.current.click()}\n    >\n      <input\n        ref={inputRef}\n        type=\"file\"\n        accept=\"application/pdf\"\n        className=\"hidden\"\n        onChange={handleChange}\n        disabled={uploading}\n      />\n      <div className=\"flex flex-col items-center gap-2\">\n        <div className={`w-16 h-16 rounded-full flex items-center justify-center bg-gradient-to-tr from-blue-400 to-purple-400 animate-pulse ${uploading ? \"opacity-60\" : \"\"}`}>\n          <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4v16m8-8H4\" /></svg>\n        </div>\n        <p className=\"text-lg font-medium text-gray-700\">拖拽 PDF 到此处，或点击上传</p>\n        <p className=\"text-xs text-gray-400\">仅支持单个 PDF 文件</p>\n        {uploading && <span className=\"mt-2 text-blue-500 animate-pulse\">上传中…</span>}\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}